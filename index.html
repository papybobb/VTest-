<!DOCTYPE html>

<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le V Menu üòà</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        background: #0F0F1E;
        color: #FFFFFF;
        line-height: 1.6;
    }

    .header {
        background: linear-gradient(135deg, #6C5CE7 0%, #FF6B9D 100%);
        padding: 2rem 1.5rem;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }

    .brand-title {
        font-size: 2rem;
        margin-bottom: 0.5rem;
        font-weight: 700;
    }

    .brand-subtitle {
        opacity: 0.95;
        font-size: 0.95rem;
    }

    .products-section {
        padding: 2rem 1rem;
        max-width: 1200px;
        margin: 0 auto;
    }

    .products-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
    }

    .product-card {
        background: #1A1A2E;
        border-radius: 16px;
        overflow: hidden;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
    }

    .product-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 32px rgba(108, 92, 231, 0.4);
    }

    .product-image {
        width: 100%;
        height: 220px;
        object-fit: cover;
        background: #252541;
    }

    .product-badge {
        position: absolute;
        top: 12px;
        right: 12px;
        background: #FFD93D;
        color: #0F0F1E;
        padding: 0.4rem 0.8rem;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: 700;
    }

    .product-info {
        padding: 1.5rem;
    }

    .product-title {
        font-size: 1.3rem;
        margin-bottom: 0.5rem;
        font-weight: 600;
    }

    .product-description {
        color: #B8B8D0;
        margin-bottom: 1rem;
        font-size: 0.9rem;
        line-height: 1.5;
    }

    .product-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .product-price {
        font-size: 1.5rem;
        font-weight: 700;
        color: #FFD93D;
    }

    .product-rating {
        color: #FFD93D;
        font-size: 0.9rem;
    }

    /* Modal */
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        z-index: 1000;
        overflow-y: auto;
        padding: 1rem;
    }

    .modal.active {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .modal-content {
        background: #1A1A2E;
        border-radius: 16px;
        max-width: 600px;
        width: 100%;
        position: relative;
        max-height: 90vh;
        overflow-y: auto;
    }

    .modal-close {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: rgba(255, 255, 255, 0.1);
        border: none;
        color: white;
        font-size: 2rem;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        z-index: 10;
        transition: all 0.3s;
    }

    .modal-close:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: rotate(90deg);
    }

    .modal-media img {
        width: 100%;
        height: 300px;
        object-fit: cover;
    }

    .modal-info {
        padding: 2rem;
    }

    .modal-title {
        font-size: 1.8rem;
        margin-bottom: 0.5rem;
    }

    .modal-price {
        font-size: 2rem;
        color: #FFD93D;
        margin-bottom: 1rem;
        font-weight: 700;
    }

    .modal-description {
        color: #B8B8D0;
        margin-bottom: 2rem;
        line-height: 1.7;
    }

    .format-label {
        display: block;
        font-weight: 600;
        margin-bottom: 1rem;
        font-size: 1.1rem;
    }

    .format-option {
        background: #252541;
        padding: 1rem;
        border-radius: 12px;
        margin-bottom: 0.75rem;
        cursor: pointer;
        border: 2px solid transparent;
        display: flex;
        justify-content: space-between;
        transition: all 0.3s;
    }

    .format-option:hover {
        border-color: #6C5CE7;
        background: rgba(108, 92, 231, 0.1);
    }

    .format-option.selected {
        border-color: #6C5CE7;
        background: rgba(108, 92, 231, 0.2);
    }

    .format-name {
        font-weight: 600;
    }

    .format-price {
        color: #FFD93D;
        font-weight: 700;
    }

    .order-btn {
        width: 100%;
        background: linear-gradient(135deg, #6C5CE7 0%, #FF6B9D 100%);
        color: white;
        border: none;
        padding: 1.2rem;
        border-radius: 12px;
        font-size: 1.1rem;
        font-weight: 700;
        cursor: pointer;
        margin: 2rem 0;
        transition: all 0.3s;
    }

    .order-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 24px rgba(108, 92, 231, 0.4);
    }

    .rating-section {
        background: #252541;
        padding: 1.5rem;
        border-radius: 12px;
        margin-bottom: 2rem;
    }

    .rating-section h3 {
        margin-bottom: 1rem;
    }

    .stars {
        font-size: 2rem;
        margin: 1rem 0;
    }

    .star {
        cursor: pointer;
        color: #666;
        transition: all 0.2s;
    }

    .star:hover,
    .star.active {
        color: #FFD93D;
        transform: scale(1.2);
    }

    .rating-average {
        color: #B8B8D0;
        font-size: 0.9rem;
        margin-top: 0.5rem;
    }

    .comments-section {
        background: #252541;
        padding: 1.5rem;
        border-radius: 12px;
    }

    .comments-section h3 {
        margin-bottom: 1rem;
    }

    .comment-form textarea {
        width: 100%;
        background: #0F0F1E;
        border: 2px solid transparent;
        border-radius: 8px;
        padding: 1rem;
        color: white;
        font-family: inherit;
        font-size: 0.95rem;
        resize: vertical;
        transition: all 0.3s;
    }

    .comment-form textarea:focus {
        outline: none;
        border-color: #6C5CE7;
    }

    .submit-comment {
        margin-top: 0.75rem;
        background: #6C5CE7;
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
    }

    .submit-comment:hover {
        background: #5849C7;
        transform: translateY(-2px);
    }

    .comment {
        background: #0F0F1E;
        padding: 1rem;
        border-radius: 8px;
        margin-top: 1rem;
    }

    .comment-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.5rem;
    }

    .comment-author {
        font-weight: 600;
        color: #6C5CE7;
    }

    .comment-rating {
        color: #FFD93D;
    }

    .comment-text {
        color: #B8B8D0;
        line-height: 1.6;
    }

    .comment-date {
        font-size: 0.8rem;
        color: #666;
        margin-top: 0.5rem;
    }

    .no-comments {
        text-align: center;
        color: #B8B8D0;
        padding: 2rem;
        font-style: italic;
    }

    @media (max-width: 768px) {
        .products-grid {
            grid-template-columns: 1fr;
        }
        .brand-title {
            font-size: 1.6rem;
        }
        .modal-info {
            padding: 1.5rem;
        }
    }
</style>
```

</head>
<body>
    <header class="header">
        <h1 class="brand-title">üòà Le V Menu üòà</h1>
        <p class="brand-subtitle">Produits de qualit√© premium</p>
    </header>

```
<main class="products-section">
    <div class="products-grid" id="productsGrid"></div>
</main>

<!-- Modal -->
<div class="modal" id="productModal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal()">&times;</button>
        <div class="modal-media">
            <img id="modalImage" src="" alt="">
        </div>
        <div class="modal-info">
            <h2 class="modal-title" id="modalTitle"></h2>
            <p class="modal-price" id="modalPrice"></p>
            <p class="modal-description" id="modalDescription"></p>
            
            <label class="format-label">Choisissez votre format :</label>
            <div id="formatOptions"></div>
            
            <button class="order-btn" onclick="orderProduct()">Commander maintenant üöÄ</button>
            
            <div class="rating-section">
                <h3>Notez ce produit</h3>
                <div class="stars" id="starsInput">
                    <span class="star" onclick="addRating(1)">‚òÜ</span>
                    <span class="star" onclick="addRating(2)">‚òÜ</span>
                    <span class="star" onclick="addRating(3)">‚òÜ</span>
                    <span class="star" onclick="addRating(4)">‚òÜ</span>
                    <span class="star" onclick="addRating(5)">‚òÜ</span>
                </div>
                <p class="rating-average" id="ratingAverage"></p>
            </div>
            
            <div class="comments-section">
                <h3>Commentaires</h3>
                <div class="comment-form">
                    <textarea id="commentInput" placeholder="Partagez votre exp√©rience..." rows="3"></textarea>
                    <button class="submit-comment" onclick="addComment()">Publier</button>
                </div>
                <div id="commentsList"></div>
            </div>
        </div>
    </div>
</div>

<script>
    // ========================================
    // ‚ö†Ô∏è CONFIGURATION - MODIFIEZ ICI
    // ========================================
    const CONFIG = {
        // Votre nom d'utilisateur Telegram (sans le @)
        telegramUsername: 'Le_V667',
        
        // Vos produits
        products: [
            {
                id: 1,
                name: 'üç´Brownies 90U Gorilla Glueüç´',
                description: 'brownies sec et petant en bouche ! Strong like gorillas.',
                price: '8‚Ç¨',
                image: 'https://images.unsplash.com/photo-1574071318508-1cdbab80d002?w=400&h=400&fit=crop',
                badge: 'Top 1 ü•á',
                formats: [
                    { name: '2.5g', price: '20‚Ç¨' },
                    { name: '5g', price: '40‚Ç¨' },
                    { name: '10g', price: '80‚Ç¨' }
                ],
                ratings: [],
                comments: []
            },
            {
                id: 2,
                name: 'ü¶ÑSucre Glass Isoreme R/Sü¶Ñ',
                description: 'Un petit tour de Licorne ?!',
                price: '30‚Ç¨',
                image: 'https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400&h=400&fit=crop',
                badge: 'ü¶Ñüåà',
                formats: [
                    { name: '1g', price: '30‚Ç¨' },
                    { name: '2g', price: '60‚Ç¨' },
                    { name: '5g', price: '130‚Ç¨' }
                ],
                ratings: [],
                comments: []
            },
            {
                id: 3,
                name: 'üçù Pasta Carbonara',
                description: 'P√¢tes fra√Æches avec lardons fum√©s, cr√®me onctueuse, parmesan r√¢p√© et jaune d\'≈ìuf. Un classique g√©n√©reux.',
                price: '14‚Ç¨',
                image: 'https://images.unsplash.com/photo-1621996346565-e3dbc646d9a9?w=400&h=400&fit=crop',
                badge: 'Nouveau',
                formats: [
                    { name: 'Portion normale', price: '14‚Ç¨' },
                    { name: 'Grande portion', price: '18‚Ç¨' },
                    { name: 'Portion XXL', price: '22‚Ç¨' }
                ],
                ratings: [],
                comments: []
            }
        ]
    };

    // Variables globales
    let currentProduct = null;
    let selectedFormat = null;

    // Initialisation
    window.onload = function() {
        initTelegramWebApp();
        loadProducts();
        loadStoredData();
    };

    function initTelegramWebApp() {
        if (window.Telegram && window.Telegram.WebApp) {
            const tg = window.Telegram.WebApp;
            tg.ready();
            tg.expand();
        }
    }

    function loadProducts() {
        const grid = document.getElementById('productsGrid');
        
        CONFIG.products.forEach(product => {
            const avgRating = calculateAverageRating(product.ratings);
            
            const card = document.createElement('div');
            card.className = 'product-card';
            card.onclick = () => openProductModal(product);
            
            card.innerHTML = `
                <div style="position: relative;">
                    <img src="${product.image}" alt="${product.name}" class="product-image">
                    ${product.badge ? `<span class="product-badge">${product.badge}</span>` : ''}
                </div>
                <div class="product-info">
                    <h3 class="product-title">${product.name}</h3>
                    <p class="product-description">${product.description}</p>
                    <div class="product-footer">
                        <span class="product-price">${product.price}</span>
                        <div class="product-rating">
                            ‚≠ê ${avgRating.toFixed(1)} (${product.ratings.length})
                        </div>
                    </div>
                </div>
            `;
            
            grid.appendChild(card);
        });
    }

    function openProductModal(product) {
        currentProduct = product;
        selectedFormat = product.formats[0];
        
        document.getElementById('modalImage').src = product.image;
        document.getElementById('modalTitle').textContent = product.name;
        document.getElementById('modalPrice').textContent = product.price;
        document.getElementById('modalDescription').textContent = product.description;
        
        loadFormats(product.formats);
        loadRatings(product);
        loadComments(product);
        
        document.getElementById('productModal').classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    function closeModal() {
        document.getElementById('productModal').classList.remove('active');
        document.body.style.overflow = 'auto';
    }

    function loadFormats(formats) {
        const container = document.getElementById('formatOptions');
        container.innerHTML = '';
        
        formats.forEach((format, index) => {
            const option = document.createElement('div');
            option.className = 'format-option' + (index === 0 ? ' selected' : '');
            option.onclick = () => selectFormat(format, option);
            
            option.innerHTML = `
                <span class="format-name">${format.name}</span>
                <span class="format-price">${format.price}</span>
            `;
            
            container.appendChild(option);
        });
    }

    function selectFormat(format, element) {
        selectedFormat = format;
        document.querySelectorAll('.format-option').forEach(opt => {
            opt.classList.remove('selected');
        });
        element.classList.add('selected');
    }

    function orderProduct() {
        if (!selectedFormat) {
            alert('Veuillez s√©lectionner un format');
            return;
        }
        
        const message = `Bonjour ! Je souhaite commander :\n\nüì¶ ${currentProduct.name}\nüìè Format : ${selectedFormat.name}\nüí∞ Prix : ${selectedFormat.price}`;
        const url = `https://t.me/${CONFIG.telegramUsername}?text=${encodeURIComponent(message)}`;
        
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.openTelegramLink(url);
        } else {
            window.open(url, '_blank');
        }
    }

    function addRating(rating) {
        if (!currentProduct) return;
        
        currentProduct.ratings.push(rating);
        saveToStorage();
        loadRatings(currentProduct);
        showFeedback('Merci pour votre note ! ‚≠ê');
    }

    function loadRatings(product) {
        const avgRating = calculateAverageRating(product.ratings);
        const text = product.ratings.length > 0 
            ? `Note moyenne : ${avgRating.toFixed(1)}/5 (${product.ratings.length} avis)`
            : 'Soyez le premier √† noter ce produit';
        
        document.getElementById('ratingAverage').textContent = text;
        updateStarsDisplay(avgRating);
    }

    function updateStarsDisplay(rating) {
        const stars = document.querySelectorAll('#starsInput .star');
        stars.forEach((star, index) => {
            if (index < Math.round(rating)) {
                star.textContent = '‚òÖ';
                star.classList.add('active');
            } else {
                star.textContent = '‚òÜ';
                star.classList.remove('active');
            }
        });
    }

    function calculateAverageRating(ratings) {
        if (ratings.length === 0) return 0;
        return ratings.reduce((a, b) => a + b, 0) / ratings.length;
    }

    function addComment() {
        const input = document.getElementById('commentInput');
        const text = input.value.trim();
        
        if (!text) {
            alert('Veuillez √©crire un commentaire');
            return;
        }
        
        const comment = {
            author: getUserName(),
            text: text,
            date: new Date().toISOString(),
            rating: calculateAverageRating(currentProduct.ratings)
        };
        
        currentProduct.comments.unshift(comment);
        saveToStorage();
        loadComments(currentProduct);
        input.value = '';
        showFeedback('Commentaire publi√© ! üí¨');
    }

    function loadComments(product) {
        const container = document.getElementById('commentsList');
        container.innerHTML = '';
        
        if (product.comments.length === 0) {
            container.innerHTML = '<p class="no-comments">Aucun commentaire. Soyez le premier !</p>';
            return;
        }
        
        product.comments.forEach(comment => {
            const div = document.createElement('div');
            div.className = 'comment';
            
            const date = new Date(comment.date);
            const formatted = date.toLocaleDateString('fr-FR', {
                day: 'numeric',
                month: 'long',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            div.innerHTML = `
                <div class="comment-header">
                    <span class="comment-author">${escapeHtml(comment.author)}</span>
                    <span class="comment-rating">${'‚≠ê'.repeat(Math.round(comment.rating))}</span>
                </div>
                <p class="comment-text">${escapeHtml(comment.text)}</p>
                <p class="comment-date">${formatted}</p>
            `;
            
            container.appendChild(div);
        });
    }

    function getUserName() {
        try {
            if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.initDataUnsafe) {
                const user = window.Telegram.WebApp.initDataUnsafe.user;
                if (user && user.first_name) return user.first_name;
            }
        } catch (e) {}
        return 'Utilisateur';
    }

    function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }

    function showFeedback(message) {
        const feedback = document.createElement('div');
        feedback.style.cssText = 'position:fixed;top:20px;left:50%;transform:translateX(-50%);background:linear-gradient(135deg,#6C5CE7,#FF6B9D);color:white;padding:1rem 2rem;border-radius:12px;font-weight:600;z-index:10000;box-shadow:0 8px 32px rgba(0,0,0,0.3);';
        feedback.textContent = message;
        document.body.appendChild(feedback);
        setTimeout(() => feedback.remove(), 2000);
    }

    function saveToStorage() {
        try {
            localStorage.setItem('vmenu_data', JSON.stringify(CONFIG.products));
        } catch (e) {
            console.log('Erreur de sauvegarde');
        }
    }

    function loadStoredData() {
        try {
            const stored = localStorage.getItem('vmenu_data');
            if (stored) {
                const data = JSON.parse(stored);
                data.forEach((storedProduct, index) => {
                    if (CONFIG.products[index]) {
                        CONFIG.products[index].ratings = storedProduct.ratings || [];
                        CONFIG.products[index].comments = storedProduct.comments || [];
                    }
                });
            }
        } catch (e) {
            console.log('Erreur de chargement');
        }
    }

    // Fermer modal avec Echap
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closeModal();
    });

    // Fermer modal en cliquant √† l'ext√©rieur
    document.getElementById('productModal').addEventListener('click', (e) => {
        if (e.target.id === 'productModal') closeModal();
    });
</script>
```

</body>
</html>