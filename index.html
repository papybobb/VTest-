<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ma Galerie</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #f0f0f0;
        }
        .header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .header h1 {
            margin: 0 0 10px 0;
        }
        .add-btn {
            background: purple;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
        }
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }
        .card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
        }
        .card img {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }
        .card-body {
            padding: 15px;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
        }
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-box {
            background: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
        }
        input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 10px;
        }
        .btn-add {
            background: purple;
            color: white;
        }
        .btn-cancel {
            background: #ddd;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Ma Galerie</h1>
        <p id="count"></p>
        <button class="add-btn" onclick="openModal()">Ajouter</button>
    </div>

    <div class="gallery" id="gallery"></div>

    <div class="modal" id="modal">
        <div class="modal-box">
            <h2>Nouvelle oeuvre</h2>
            <input type="text" id="title" placeholder="Titre">
            <input type="text" id="url" placeholder="URL image">
            <button class="btn btn-add" onclick="add()">Ajouter</button>
            <button class="btn btn-cancel" onclick="closeModal()">Annuler</button>
        </div>
    </div>

    <script>
        var data = [
            {id: 1, title: "Sunset", url: "https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=400", likes: 42},
            {id: 2, title: "Urban", url: "https://images.unsplash.com/photo-1460661419201-fd4cecdf8a8b?w=400", likes: 38},
            {id: 3, title: "Abstract", url: "https://images.unsplash.com/photo-1549887534-1541e9326642?w=400", likes: 51}
        ];

        function show() {
            var html = "";
            for (var i = 0; i < data.length; i++) {
                html += "<div class='card' onclick='like(" + data[i].id + ")'>";
                html += "<img src='" + data[i].url + "'>";
                html += "<div class='card-body'>";
                html += "<h3>" + data[i].title + "</h3>";
                html += "<p>Likes: " + data[i].likes + "</p>";
                html += "</div></div>";
            }
            document.getElementById("gallery").innerHTML = html;
            document.getElementById("count").innerHTML = data.length + " oeuvres";
        }

        function openModal() {
            document.getElementById("modal").className = "modal show";
        }

        function closeModal() {
            document.getElementById("modal").className = "modal";
        }

        function add() {
            var t = document.getElementById("title").value;
            var u = document.getElementById("url").value;
            if (t && u) {
                data.push({id: Date.now(), title: t, url: u, likes: 0});
                show();
                closeModal();
                document.getElementById("title").value = "";
                document.getElementById("url").value = "";
            }
        }

        function like(id) {
            for (var i = 0; i < data.length; i++) {
                if (data[i].id == id) {
                    data[i].likes = data[i].likes + 1;
                }
            }
            show();
        }

        show();
    </script>
</body>
</html>
